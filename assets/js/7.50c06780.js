(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{369:function(t,_,v){t.exports=v.p+"assets/img/0.ffb1c9b7.gif"},392:function(t,_,v){"use strict";v.r(_);var e=v(28),r=Object(e.a)({},(function(){var t=this,_=t.$createElement,e=t._self._c||_;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"http-api-node-onebot"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#http-api-node-onebot"}},[t._v("#")]),t._v(" http-api (node-onebot)")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),e("p",[t._v("将机器人部署为独立的服务，通过http或ws与外界通信"),e("br"),t._v("\n兼容 "),e("a",{attrs:{href:"https://cqhttp.cc",target:"_blank",rel:"noopener noreferrer"}},[t._v("onebot"),e("OutboundLink")],1),t._v(" 协议 (旧称cqhttp)"),e("br"),t._v("\n系统中需安装 "),e("a",{attrs:{href:"https://nodejs.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("nodejs"),e("OutboundLink")],1),t._v(" 12.16 以上版本，否则报错")])]),t._v(" "),e("p",[e("img",{attrs:{src:v(369),alt:"usage"}})]),t._v(" "),e("p",[e("strong",[t._v("Usage:")])]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# install")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i oicq -g\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# startup")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" oicq "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("account"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# startup with pm2")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" pm2 start "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"oicq <account>"')]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# update")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" up -g oicq\n")])])]),e("blockquote",[e("p",[t._v("配置等文件存储在 "),e("code",[t._v("/home/<user>/.oicq/")]),t._v(" 下，Windows下一般是 "),e("code",[t._v("C:\\Users\\<user>\\.oicq\\")]),e("br"),t._v("\n可以用扫码或密码登录，如需切换登录方式，请删除 "),e("code",[t._v("%HOME%/.oicq/<account>/password")]),t._v(" 文件")])]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"通信"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#通信"}},[t._v("#")]),t._v(" 通信")]),t._v(" "),e("ul",[e("li",[t._v("[x] HTTP和正向WS服务器")]),t._v(" "),e("li",[t._v("[x] POST上报(多点)")]),t._v(" "),e("li",[t._v("[x] 反向WS连接(多点)")])]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"api-完整文档"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#api-完整文档"}},[t._v("#")]),t._v(" API ("),e("a",{attrs:{href:"https://github.com/howmanybots/onebot/blob/master/v11/specs/api/public.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("完整文档"),e("OutboundLink")],1),t._v(")")]),t._v(" "),e("details",[e("summary",[t._v("已实现(文档中已列出)")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("名称")]),t._v(" "),e("th",[t._v("备注")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("get_friend_list")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("get_group_list")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("get_group_info")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("get_group_member_list")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("get_group_member_info")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("get_stranger_info")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("send_private_msg")])]),t._v(" "),e("td",[t._v("message_id是string")])]),t._v(" "),e("tr",[e("td",[e("strong",[t._v("send_group_msg")])]),t._v(" "),e("td",[t._v("message_id是string")])]),t._v(" "),e("tr",[e("td",[t._v("send_msg")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("delete_msg")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("get_msg")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("set_friend_add_request")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("set_group_add_request")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("set_group_special_title")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("set_group_admin")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("set_group_card")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("set_group_kick")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("set_group_ban")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("set_group_leave")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("set_group_name")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("set_group_whole_ban")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("set_group_anonymous_ban")]),t._v(" "),e("td",[t._v("仅支持flag字段，不支持另外两种")])]),t._v(" "),e("tr",[e("td",[t._v("set_group_anonymous")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("send_like")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("get_login_info")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("can_send_image")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("can_send_record")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("get_status")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("get_version_info")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v(".handle_quick_operation")]),t._v(" "),e("td",[t._v("仅WS有效")])]),t._v(" "),e("tr",[e("td",[t._v("get_cookies")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("get_csrf_token")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("clean_cache")]),t._v(" "),e("td")])])])]),t._v(" "),e("details",[e("summary",[t._v("已实现(新增)")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("名称")]),t._v(" "),e("th",[t._v("参数")]),t._v(" "),e("th",[t._v("备注")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("get_stranger_list")]),t._v(" "),e("td"),t._v(" "),e("td",[t._v("获取陌生人列表")])]),t._v(" "),e("tr",[e("td",[t._v("send_discuss_msg")]),t._v(" "),e("td",[t._v("discuss_id"),e("br"),t._v("message"),e("br"),t._v("auto_escape")]),t._v(" "),e("td",[t._v("发讨论组消息，没有message_id")])]),t._v(" "),e("tr",[e("td",[t._v("send_group_notice")]),t._v(" "),e("td",[t._v("content")]),t._v(" "),e("td",[t._v("发送群公告")])]),t._v(" "),e("tr",[e("td",[t._v("send_group_poke")]),t._v(" "),e("td",[t._v("group_id"),e("br"),t._v("user_id")]),t._v(" "),e("td",[t._v("群戳一戳，未来可能会用CQ码实现")])]),t._v(" "),e("tr",[e("td",[t._v("set_online_status")]),t._v(" "),e("td",[t._v("status")]),t._v(" "),e("td",[t._v("设置在线状态(※仅限手机协议支持)"),e("br"),t._v("11我在线上 31离开 41隐身 50忙碌 60Q我吧 70请勿打扰")])]),t._v(" "),e("tr",[e("td",[t._v("add_friend")]),t._v(" "),e("td",[t._v("group_id"),e("br"),t._v("user_id"),e("br"),t._v("comment")]),t._v(" "),e("td",[t._v("添加群员为好友")])]),t._v(" "),e("tr",[e("td",[t._v("delete_friend")]),t._v(" "),e("td",[t._v("user_id"),e("br"),t._v("block")]),t._v(" "),e("td",[t._v("删除好友"),e("br"),t._v("block默认为true")])]),t._v(" "),e("tr",[e("td",[t._v("invite_friend")]),t._v(" "),e("td",[t._v("group_id"),e("br"),t._v("user_id")]),t._v(" "),e("td",[t._v("邀请好友入群")])]),t._v(" "),e("tr",[e("td",[t._v("set_nickname")]),t._v(" "),e("td",[t._v("nickname")]),t._v(" "),e("td",[t._v("设置昵称")])]),t._v(" "),e("tr",[e("td",[t._v("set_gender")]),t._v(" "),e("td",[t._v("gender")]),t._v(" "),e("td",[t._v("设置性别 0未知 1男 2女")])]),t._v(" "),e("tr",[e("td",[t._v("set_birthday")]),t._v(" "),e("td",[t._v("birthday")]),t._v(" "),e("td",[t._v("设置生日 格式：20110202")])]),t._v(" "),e("tr",[e("td",[t._v("set_description")]),t._v(" "),e("td",[t._v("description")]),t._v(" "),e("td",[t._v("设置个人说明")])]),t._v(" "),e("tr",[e("td",[t._v("set_signature")]),t._v(" "),e("td",[t._v("signature")]),t._v(" "),e("td",[t._v("设置签名")])]),t._v(" "),e("tr",[e("td",[t._v("set_portrait")]),t._v(" "),e("td",[t._v("file")]),t._v(" "),e("td",[t._v("设置个人头像，与CQ码中的file格式相同")])]),t._v(" "),e("tr",[e("td",[t._v("set_group_portrait")]),t._v(" "),e("td",[t._v("file")]),t._v(" "),e("td",[t._v("设置群头像")])]),t._v(" "),e("tr",[e("td",[t._v("get_system_msg")]),t._v(" "),e("td"),t._v(" "),e("td",[t._v("获得未处理的申请")])]),t._v(" "),e("tr",[e("td",[t._v("get_chat_history")]),t._v(" "),e("td",[t._v("message_id"),e("br"),t._v("count")]),t._v(" "),e("td",[t._v("返回message_id往前的count条消息"),e("br"),t._v("count默认20")])]),t._v(" "),e("tr",[e("td",[t._v("get_forward_msg")]),t._v(" "),e("td",[t._v("resid")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("send_temp_msg")]),t._v(" "),e("td",[t._v("group_id"),e("br"),t._v("user_id"),e("br"),t._v("message"),e("br"),t._v("auto_escape")]),t._v(" "),e("td")])])])]),t._v(" "),e("details",[e("summary",[t._v("尚未实现")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("名称")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("get_group_honor_info")])]),t._v(" "),e("tr",[e("td",[t._v("get_credentials")])]),t._v(" "),e("tr",[e("td",[t._v("get_vip_info")])]),t._v(" "),e("tr",[e("td",[t._v("get_record")])]),t._v(" "),e("tr",[e("td",[t._v("get_image")])]),t._v(" "),e("tr",[e("td",[t._v("set_restart")])])])])]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"events"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#events"}},[t._v("#")]),t._v(" Events")]),t._v(" "),e("details",[e("summary",[t._v("点开")]),t._v(" "),e("p",[t._v("notice事件有部分格式默认与cqhttp中的格式不同。"),e("br"),t._v("\n如需使用cqhttp格式，在config.js中将"),e("code",[t._v("use_cqhttp_notice")]),t._v("设置为"),e("code",[t._v("true")]),t._v("。")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th"),t._v(" "),e("th",[t._v("新版格式("),e("a",{attrs:{href:"https://github.com/takayama-lily/oicq/wiki/92.%E4%BA%8B%E4%BB%B6%E6%96%87%E6%A1%A3",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),e("OutboundLink")],1),t._v(")")]),t._v(" "),e("th",[t._v("cqhttp格式("),e("a",{attrs:{href:"https://github.com/howmanybots/onebot/blob/master/v11/specs/event/README.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("文档"),e("OutboundLink")],1),t._v(")")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("好友请求")]),t._v(" "),e("td",[t._v("request.friend.add")]),t._v(" "),e("td",[t._v("request.friend")])]),t._v(" "),e("tr",[e("td",[t._v("加群请求")]),t._v(" "),e("td",[t._v("request.group.add")]),t._v(" "),e("td",[t._v("request.group.add")])]),t._v(" "),e("tr",[e("td",[t._v("加群邀请")]),t._v(" "),e("td",[t._v("request.group.invite")]),t._v(" "),e("td",[t._v("request.group.invite")])]),t._v(" "),e("tr",[e("td",[t._v("好友消息")]),t._v(" "),e("td",[t._v("message.private.friend")]),t._v(" "),e("td",[t._v("message.private.friend")])]),t._v(" "),e("tr",[e("td",[t._v("单向好友")]),t._v(" "),e("td",[t._v("message.private.single")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("临时会话")]),t._v(" "),e("td",[t._v("message.private.group")]),t._v(" "),e("td",[t._v("message.private.group")])]),t._v(" "),e("tr",[e("td",[t._v("临时会话")]),t._v(" "),e("td",[t._v("message.private.other")]),t._v(" "),e("td",[t._v("message.private.other")])]),t._v(" "),e("tr",[e("td",[t._v("群聊消息")]),t._v(" "),e("td",[t._v("message.group.normal")]),t._v(" "),e("td",[t._v("message.group.normal")])]),t._v(" "),e("tr",[e("td",[t._v("匿名消息")]),t._v(" "),e("td",[t._v("message.group.anonymous")]),t._v(" "),e("td",[t._v("message.group.anonymous")])]),t._v(" "),e("tr",[e("td",[t._v("讨论组消")]),t._v(" "),e("td",[t._v("message.discuss")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("好友增加")]),t._v(" "),e("td",[t._v("notice.friend.increase")]),t._v(" "),e("td",[t._v("notice.friend_add")])]),t._v(" "),e("tr",[e("td",[t._v("好友减少")]),t._v(" "),e("td",[t._v("notice.friend.decrease")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("好友撤回")]),t._v(" "),e("td",[t._v("notice.friend.recall")]),t._v(" "),e("td",[t._v("notice.friend_recall")])]),t._v(" "),e("tr",[e("td",[t._v("资料变更")]),t._v(" "),e("td",[t._v("notice.friend.profile")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("群员增加")]),t._v(" "),e("td",[t._v("notice.group.increase")]),t._v(" "),e("td",[t._v("notice.group_increase")])]),t._v(" "),e("tr",[e("td",[t._v("群员减少")]),t._v(" "),e("td",[t._v("notice.group.decrease")]),t._v(" "),e("td",[t._v("notice.group_decrease")])]),t._v(" "),e("tr",[e("td",[t._v("群组撤回")]),t._v(" "),e("td",[t._v("notice.group.recall")]),t._v(" "),e("td",[t._v("notice.group_recall")])]),t._v(" "),e("tr",[e("td",[t._v("管理变更")]),t._v(" "),e("td",[t._v("notice.group.admin")]),t._v(" "),e("td",[t._v("notice.group_admin")])]),t._v(" "),e("tr",[e("td",[t._v("群组禁言")]),t._v(" "),e("td",[t._v("notice.group.ban")]),t._v(" "),e("td",[t._v("notice.group_ban")])]),t._v(" "),e("tr",[e("td",[t._v("群组转让")]),t._v(" "),e("td",[t._v("notice.group.transfer")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("群组文件")]),t._v(" "),e("td",[t._v("表现为CQ码")]),t._v(" "),e("td",[t._v("notice.group_upload")])]),t._v(" "),e("tr",[e("td",[t._v("群戳一戳")]),t._v(" "),e("td",[t._v("notice.group.poke")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("群设置变")]),t._v(" "),e("td",[t._v("notice.group.setting")]),t._v(" "),e("td")]),t._v(" "),e("tr",[e("td",[t._v("元事件")]),t._v(" "),e("td",[t._v("meta_event.lifecycle.enable")]),t._v(" "),e("td",[t._v("meta_event.lifecycle.enable")])]),t._v(" "),e("tr",[e("td",[t._v("元事件")]),t._v(" "),e("td",[t._v("meta_event.lifecycle.disable")]),t._v(" "),e("td",[t._v("meta_event.lifecycle.disable")])]),t._v(" "),e("tr",[e("td",[t._v("元事件")]),t._v(" "),e("td",[t._v("meta_event.lifecycle.connect")]),t._v(" "),e("td",[t._v("meta_event.lifecycle.connect")])]),t._v(" "),e("tr",[e("td",[t._v("元事件")]),t._v(" "),e("td",[t._v("meta_event.heartbeat")]),t._v(" "),e("td",[t._v("meta_event.heartbeat")])])])])]),t._v(" "),e("hr"),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/takayama-lily/oicq/wiki/90.%E5%A6%82%E4%BD%95%E5%8F%91%E9%80%81%E5%A4%9A%E5%AA%92%E4%BD%93%E5%86%85%E5%AE%B9(CQ%E7%A0%81)",target:"_blank",rel:"noopener noreferrer"}},[t._v("支持的CQ码"),e("OutboundLink")],1)]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"其他"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[t._v("#")]),t._v(" 其他")]),t._v(" "),e("ul",[e("li",[t._v("[x] 字符串或数组消息段")]),t._v(" "),e("li",[t._v("[x] 鉴权")]),t._v(" "),e("li",[t._v("[x] WS心跳")]),t._v(" "),e("li",[t._v("[x] _async异步调用api")]),t._v(" "),e("li",[t._v("[x] _rate_limited限速调用api")]),t._v(" "),e("li",[t._v("[x] "),e("a",{attrs:{href:"https://richardchien.gitee.io/coolq-http-api/docs/4.15/#/EventFilter",target:"_blank",rel:"noopener noreferrer"}},[t._v("事件过滤器"),e("OutboundLink")],1)]),t._v(" "),e("li",[t._v("[x] 设置允许跨域请求")]),t._v(" "),e("li",[t._v("[x] config.js 支持更多的"),e("a",{attrs:{href:"https://github.com/takayama-lily/oicq/blob/b392e5f5088d7f281afea0e8797bcd0f60d1f3ea/index.d.ts#L11-L47",target:"_blank",rel:"noopener noreferrer"}},[t._v("配置"),e("OutboundLink")],1)])]),t._v(" "),e("h2",{attrs:{id:"考古"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#考古"}},[t._v("#")]),t._v(" 考古")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://richardchien.gitee.io/coolq-http-api/docs/4.15/#/Configuration",target:"_blank",rel:"noopener noreferrer"}},[t._v("旧版cqhttp文档"),e("OutboundLink")],1)])])}),[],!1,null,null,null);_.default=r.exports}}]);