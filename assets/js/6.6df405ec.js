(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{367:function(t,a,s){t.exports=s.p+"assets/img/1.d8650996.png"},368:function(t,a,s){t.exports=s.p+"assets/img/2.02761437.png"},391:function(t,a,s){"use strict";s.r(a);var e=s(28),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"杂七杂八"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#杂七杂八"}},[t._v("#")]),t._v(" 杂七杂八")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("说明")]),t._v(" "),e("p",[t._v("这里有使用时的其他说明和教程")])]),t._v(" "),e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#划动验证码和设备锁"}},[t._v("划动验证码和设备锁")]),e("ul",[e("li",[e("a",{attrs:{href:"#滑动验证码"}},[t._v("滑动验证码")])]),e("li",[e("a",{attrs:{href:"#设备锁"}},[t._v("设备锁")])])])]),e("li",[e("a",{attrs:{href:"#快速构造多元素消息"}},[t._v("快速构造多元素消息")]),e("ul",[e("li",[e("a",{attrs:{href:"#什么是cq码"}},[t._v("什么是CQ码？")])]),e("li",[e("a",{attrs:{href:"#关于语音"}},[t._v("关于语音")])])])]),e("li",[e("a",{attrs:{href:"#message-id的规则和解析方法"}},[t._v("message_id的规则和解析方法")]),e("ul",[e("li",[e("a",{attrs:{href:"#群消息id规则"}},[t._v("群消息id规则")])]),e("li",[e("a",{attrs:{href:"#私聊消息id规则"}},[t._v("私聊消息id规则")])]),e("li",[e("a",{attrs:{href:"#解析消息id"}},[t._v("解析消息id")])])])]),e("li",[e("a",{attrs:{href:"#关于账号冻结和风控"}},[t._v("关于账号冻结和风控")]),e("ul",[e("li",[e("a",{attrs:{href:"#是否会因为使用开源的第三方qq协议实现而被tx封号"}},[t._v("是否会因为使用开源的第三方QQ协议实现而被tx封号？")])]),e("li",[e("a",{attrs:{href:"#可能会导致封号的原因"}},[t._v("可能会导致封号的原因")])]),e("li",[e("a",{attrs:{href:"#风控-被tx暗中限制某些功能"}},[t._v("风控（被tx暗中限制某些功能）")])])])]),e("li",[e("a",{attrs:{href:"#其他常见问题"}},[t._v("其他常见问题")]),e("ul",[e("li",[e("a",{attrs:{href:"#提示-群消息发送失败-请检查消息内容"}},[t._v("提示：群消息发送失败，请检查消息内容")])]),e("li",[e("a",{attrs:{href:"#提示-当前上网环境异常"}},[t._v("提示：当前上网环境异常")])]),e("li",[e("a",{attrs:{href:"#提示密码已泄露-被强制下线要求修改密码"}},[t._v("提示密码已泄露，被强制下线要求修改密码")])]),e("li",[e("a",{attrs:{href:"#无法设置在线状态、无法接收某些群事件-包括戳一戳等"}},[t._v("无法设置在线状态、无法接收某些群事件(包括戳一戳等)")])]),e("li",[e("a",{attrs:{href:"#其他莫名其妙的问题-如收不到群消息、收不到加群申请等"}},[t._v("其他莫名其妙的问题，如收不到群消息、收不到加群申请等")])]),e("li",[e("a",{attrs:{href:"#只能接收群聊消息-无法接收私聊消息和群邀请"}},[t._v("只能接收群聊消息，无法接收私聊消息和群邀请")])])])])])]),e("p"),t._v(" "),e("h2",{attrs:{id:"划动验证码和设备锁"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#划动验证码和设备锁"}},[t._v("#")]),t._v(" 划动验证码和设备锁")]),t._v(" "),e("h3",{attrs:{id:"滑动验证码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#滑动验证码"}},[t._v("#")]),t._v(" 滑动验证码")]),t._v(" "),e("blockquote",[e("p",[t._v("陌生设备登录时可能会出现滑动验证码，同一设备只需通过一次")])]),t._v(" "),e("p",[t._v("收到滑动验证提示后：")]),t._v(" "),e("ol",[e("li",[e("strong",[t._v("用chrome浏览器访问给出的url，并打开F12->Network (网络)")]),t._v(" "),e("img",{attrs:{src:s(367),alt:"img1"}})]),t._v(" "),e("li",[e("strong",[t._v("滑动后会发一个请求，从响应中取出ticket")]),t._v(" "),e("img",{attrs:{src:s(368),alt:"img2"}})]),t._v(" "),e("li",[e("strong",[t._v("调用 "),e("code",[t._v("client.sliderLogin(ticket)")]),t._v(" 即可成功登录")])])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),e("p",[t._v("ticket输入错误会报环境异常，重复上述过程即可"),e("br"),t._v("\n若ticket输入正确仍然环境异常，可考虑使用扫码登录。或安装："),e("a",{attrs:{href:"https://github.com/mzdluo123/TxCaptchaHelper/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("腾讯滑动验证码助手"),e("OutboundLink")],1),t._v(" 中的apk，在安卓真机上滑动后得到ticket")])]),t._v(" "),e("hr"),t._v(" "),e("h3",{attrs:{id:"设备锁"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#设备锁"}},[t._v("#")]),t._v(" 设备锁")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),e("p",[t._v("无论是否开启设备锁，在陌生设备登录都有可能会要求通过验证"),e("br"),t._v("\n可以调用SMS接口发短信验证，也可以访问给出的url扫码")])]),t._v(" "),e("p",[e("strong",[t._v("扫码(默认)：")]),t._v(" 打开验证地址url完成扫码即可。")]),t._v(" "),e("p",[e("strong",[t._v("短信验证：")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("div",{staticClass:"highlight-lines"},[e("br"),e("div",{staticClass:"highlighted"},[t._v(" ")]),e("br"),e("div",{staticClass:"highlighted"},[t._v(" ")]),e("br"),e("br"),e("br")]),e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("client"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"system.login.device"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sendSMSCode")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//发送短信")]),t._v("\n  process"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"data"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("input")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("submitSMSCode")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("input"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//提交短信验证码")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),e("p",[t._v("首次登录会创建一个device.json设备文件"),e("br"),t._v("\n验证完成后此设备文件长期有效")])]),t._v(" "),e("h2",{attrs:{id:"快速构造多元素消息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#快速构造多元素消息"}},[t._v("#")]),t._v(" 快速构造多元素消息")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),e("p",[t._v("一条消息中可能包含多个元素节点"),e("br"),t._v("\n下面的例子是：一条文本+一张图片+一个表情")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("div",{staticClass:"highlight-lines"},[e("br"),e("br"),e("br"),e("br"),e("div",{staticClass:"highlighted"},[t._v(" ")]),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br")]),e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用工具函数快速构建")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" segment"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cqcode "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"oicq"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 纯字符串形式(CQ码)")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" message "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello world"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" cqcode"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"C:/tmp/abc.jpg"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" cqcode"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("face")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("104")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// -> "hello world[CQ:image,file=/tmp/abc.jpg][CQ:face,id=104]"')]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 数组消息链形式")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" message "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  segment"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("text")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello world"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  segment"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"C:/tmp/abc.jpg"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  segment"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("face")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("104")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 手动构造数组消息链")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" message "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        type"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        data"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            text"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello world"')]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        type"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"image"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        data"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            file"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/tmp/abc.jpg"')]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        type"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"face"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        data"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            id"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("104")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),e("hr"),t._v(" "),e("h3",{attrs:{id:"什么是cq码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#什么是cq码"}},[t._v("#")]),t._v(" 什么是CQ码？")]),t._v(" "),e("p",[t._v("CQ码是指纯字符串格式下用于表示多媒体内容的方式，形如："),e("br"),t._v(" "),e("code",[t._v("[CQ:image,file=123.jpg]")]),e("br"),t._v(" "),e("code",[t._v("[CQ:at,qq=123456]")]),e("br"),t._v("\n常用的有at、表情、图片、语音、音乐等。"),e("br"),t._v("\n因此混在字符串中的CQ码，以下字符会被转义："),e("code",[t._v("[]&,")]),e("br"),t._v("\n推荐使用数组格式的消息链，可以避免转义操作。"),e("br"),t._v("\n如果你一定要使用CQ码，可使用"),e("code",[t._v("cqcode")]),t._v("内的函数，尽量不要手动拼接")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("[CQ码]")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("收")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("发")]),t._v(" "),e("th",[t._v("说明")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("at")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",[t._v("[CQ:at,qq=123456]")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("face")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",[t._v("[CQ:face,id=104]")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("bface")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",[t._v("原创表情，[CQ:bface,file=xxxxxxxx,text=摸头]")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("dice&rps")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",[t._v("骰子和猜拳："),e("br"),t._v("[CQ:dice,id=1]"),e("br"),t._v("[CQ:rps,id=1]")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("image")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",[t._v("本地图片：[CQ:image,file=/tmp/123.jpg]"),e("br"),t._v("网络图片：[CQ:image,file=http://domain.com,cache=1]"),e("br"),t._v("图片还支持base64格式和Buffer")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("record")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",[t._v("语音，写法同image")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("flash")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",[t._v("闪照，写法同image")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("anonymous")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}}),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",[t._v("发匿名，[CQ:anonymous,ignore=1]"),e("br"),t._v("ignore为0时匿名失败不发送")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("file")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}}),t._v(" "),e("td",[t._v("文件")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("music")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("json")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",[t._v("[CQ:music,type=qq,id=xxxxxx]"),e("br"),t._v("type支持"),e("code",[t._v("qq")]),t._v(" "),e("code",[t._v("163")]),t._v(" "),e("code",[t._v("kuwo")]),t._v(" "),e("code",[t._v("kugou")]),t._v(" "),e("code",[t._v("migu")])])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("location")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("json")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",[t._v("[CQ:location,address=江西省九江市修水县,lat=29.063940,lng=114.339610]")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("reply")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",[t._v("引用回复 [CQ:reply,id=xxxxxx]")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("shake")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",[t._v("[CQ:shake]")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("poke")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",[t._v("[CQ:poke,type=6] 暂时支持0~6，可以在群里发")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("xml&json")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",[t._v("可用于接收群公告等消息。封杀比较严重，不推荐发原生。")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("share")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("xml")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",[t._v("链接分享")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("video")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",[t._v("[CQ:video,file=xxxxxx]")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("node")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}}),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",[t._v("合并转发[CQ:node,id=xxxxxx]")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("mirai")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("◯")]),t._v(" "),e("td",[t._v("[CQ:mirai,data=xxxxxx] 只有mirai系的客户端可以识别此消息")])])])]),t._v(" "),e("hr"),t._v(" "),e("h3",{attrs:{id:"关于语音"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#关于语音"}},[t._v("#")]),t._v(" 关于语音")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),e("p",[t._v("QQ支持的原生格式为amr或silk"),e("br"),t._v("\n内置将mp3等格式自动转为amr，需要自行安装 "),e("a",{attrs:{href:"http://ffmpeg.org/download.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ffmpeg"),e("OutboundLink")],1),t._v(" 加入环境变量"),e("br"),t._v("\nlinux下的构建版可以在 "),e("a",{attrs:{href:"https://johnvansickle.com/ffmpeg",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://johnvansickle.com/ffmpeg"),e("OutboundLink")],1),t._v(" 下载（自带amrnb）"),e("br"),t._v("\n群语音无法直接转发到私聊，私聊语音也无法直接转发到群和其他私聊")])]),t._v(" "),e("h4",{attrs:{id:"语音的其他解决方案-自行转码到silk-音质高于amr"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#语音的其他解决方案-自行转码到silk-音质高于amr"}},[t._v("#")]),t._v(" "),e("strong",[t._v("语音的其他解决方案(自行转码到silk，音质高于amr)")])]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/Ang-YC/wx-voice",target:"_blank",rel:"noopener noreferrer"}},[t._v("wx-voice @Ang-YC"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/laysent/silk-sdk",target:"_blank",rel:"noopener noreferrer"}},[t._v("silk-sdk @laysent"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"message-id的规则和解析方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#message-id的规则和解析方法"}},[t._v("#")]),t._v(" message_id的规则和解析方法")]),t._v(" "),e("p",[t._v("发送和接收到消息都可以得到一个消息ID。"),e("br"),t._v("\n由于core中不使用数据库，所以将一些可能使用到的数据存入消息id以统一和简化API。")]),t._v(" "),e("h3",{attrs:{id:"群消息id规则"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#群消息id规则"}},[t._v("#")]),t._v(" 群消息id规则")]),t._v(" "),e("p",[t._v("群消息id总共21字节，使用base64编码保存，字符串长度为21/3*4=28")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("群号(int32)")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("发送者QQ(int32)")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("消息编号(int32)")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("随机数(int32)")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("时间戳(int32)")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("分片数(int8)")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("gid")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("uid")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("seqid")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("random")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("timestamp")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("pktnum")])])])]),t._v(" "),e("h3",{attrs:{id:"私聊消息id规则"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#私聊消息id规则"}},[t._v("#")]),t._v(" 私聊消息id规则")]),t._v(" "),e("p",[t._v("私聊消息id总共17字节，使用base64编码保存，字符串长度为18/3*4=24")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("对方QQ(int32)")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("消息编号(int32)")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("随机数(int32)")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("时间戳(int32)")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("发送flag(int8)")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("uid")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("seqid")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("random")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("timestamp")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("flag")])])])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),e("p",[t._v("发送flag: 发的消息为1，收的消息为0")])]),t._v(" "),e("h3",{attrs:{id:"解析消息id"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解析消息id"}},[t._v("#")]),t._v(" 解析消息id")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" parsed "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Buffer"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("from")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message_id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"base64"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" gid "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" parsed"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("readUInt32BE")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parsed"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" uid "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" parsed"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("readUInt32BE")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parsed"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" seqid "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" parsed"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("readUInt32BE")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parsed"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("目前使用到消息id的地方：")]),t._v(" "),e("ul",[e("li",[t._v("deleteMsg (撤回消息)")]),t._v(" "),e("li",[t._v("getMsg (获取历史消息)")]),t._v(" "),e("li",[t._v("[CQ:reply] (回复)")]),t._v(" "),e("li",[t._v("[CQ:node] (转发)")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),e("p",[t._v("一般对于群来说，seqid由服务器管理，不会重复。"),e("br"),t._v("\n私聊的seqid非服务器管理，可能会重复。")])]),t._v(" "),e("h2",{attrs:{id:"关于账号冻结和风控"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#关于账号冻结和风控"}},[t._v("#")]),t._v(" 关于账号冻结和风控")]),t._v(" "),e("h3",{attrs:{id:"是否会因为使用开源的第三方qq协议实现而被tx封号"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#是否会因为使用开源的第三方qq协议实现而被tx封号"}},[t._v("#")]),t._v(" 是否会因为使用开源的第三方QQ协议实现而被tx封号？")]),t._v(" "),e("blockquote",[e("p",[e("strong",[t._v("目前不会，但是不能保证未来也一直不会。")])])]),t._v(" "),e("h3",{attrs:{id:"可能会导致封号的原因"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#可能会导致封号的原因"}},[t._v("#")]),t._v(" 可能会导致封号的原因")]),t._v(" "),e("ol",[e("li",[t._v("被举报（不管你有没有发违规消息都有几率被封）。")]),t._v(" "),e("li",[t._v("新号私聊发链接，或发其他过于奇怪的内容。")]),t._v(" "),e("li",[t._v("不开设备锁在异地登录陌生设备（一段时间后提示密码泄露被强制下线）。")]),t._v(" "),e("li",[t._v("使用某些xposed插件。")])]),t._v(" "),e("h3",{attrs:{id:"风控-被tx暗中限制某些功能"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#风控-被tx暗中限制某些功能"}},[t._v("#")]),t._v(" 风控（被tx暗中限制某些功能）")]),t._v(" "),e("ul",[e("li",[t._v("长消息必须分片发送才能成功。")]),t._v(" "),e("li",[t._v("更换设备后，可能在最长几天之内都无法发送超过2个字节的群消息。")]),t._v(" "),e("li",[t._v("可能无法发送合并转发，以及一些xml消息。")]),t._v(" "),e("li",[t._v("可能被一定程度限制加群、加好友以及邀请入群的功能（可能进入过滤列表，或直接收不到）。")])]),t._v(" "),e("h2",{attrs:{id:"其他常见问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#其他常见问题"}},[t._v("#")]),t._v(" 其他常见问题")]),t._v(" "),e("h3",{attrs:{id:"提示-群消息发送失败-请检查消息内容"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#提示-群消息发送失败-请检查消息内容"}},[t._v("#")]),t._v(" 提示：群消息发送失败，请检查消息内容")]),t._v(" "),e("blockquote",[e("p",[t._v("有些账号使用新设备可能会被风控，需要挂机几小时到几天不等。")])]),t._v(" "),e("h3",{attrs:{id:"提示-当前上网环境异常"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#提示-当前上网环境异常"}},[t._v("#")]),t._v(" 提示：当前上网环境异常")]),t._v(" "),e("blockquote",[e("p",[t._v("使用扫码登录"),e("br"),t._v("\n或安装："),e("a",{attrs:{href:"https://github.com/mzdluo123/TxCaptchaHelper/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("腾讯滑动验证码助手"),e("OutboundLink")],1),t._v(" 中的apk，在安卓真机上滑动后得到ticket"),e("br"),t._v("\n若你使用模拟器，则需要打开桥接模式，否则依然无法得到正确的ticket")])]),t._v(" "),e("h3",{attrs:{id:"提示密码已泄露-被强制下线要求修改密码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#提示密码已泄露-被强制下线要求修改密码"}},[t._v("#")]),t._v(" 提示密码已泄露，被强制下线要求修改密码")]),t._v(" "),e("blockquote",[e("p",[t._v("异地登录的原因，请打开设备锁。")])]),t._v(" "),e("h3",{attrs:{id:"无法设置在线状态、无法接收某些群事件-包括戳一戳等"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#无法设置在线状态、无法接收某些群事件-包括戳一戳等"}},[t._v("#")]),t._v(" 无法设置在线状态、无法接收某些群事件(包括戳一戳等)")]),t._v(" "),e("blockquote",[e("p",[t._v("aPad和手表协议不支持这些功能，需切换到其他登录协议。")])]),t._v(" "),e("h3",{attrs:{id:"其他莫名其妙的问题-如收不到群消息、收不到加群申请等"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#其他莫名其妙的问题-如收不到群消息、收不到加群申请等"}},[t._v("#")]),t._v(" 其他莫名其妙的问题，如收不到群消息、收不到加群申请等")]),t._v(" "),e("blockquote",[e("p",[t._v("先使用官方客户端确认该号是否存在同样问题，若为本程序问题可在issue中反馈。")])]),t._v(" "),e("h3",{attrs:{id:"只能接收群聊消息-无法接收私聊消息和群邀请"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#只能接收群聊消息-无法接收私聊消息和群邀请"}},[t._v("#")]),t._v(" 只能接收群聊消息，无法接收私聊消息和群邀请")]),t._v(" "),e("blockquote",[e("p",[t._v("请检查你的系统时间是否快了1分钟以上")])]),t._v(" "),e("hr")])}),[],!1,null,null,null);a.default=n.exports}}]);