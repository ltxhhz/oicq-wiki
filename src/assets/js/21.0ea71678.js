(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{386:function(t,e,n){"use strict";n.r(e);var _=n(28),a=Object(_.a)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"qq-web-api-收集"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#qq-web-api-收集"}},[t._v("#")]),t._v(" QQ Web Api 收集")]),t._v(" "),n("p",[t._v("web api 是需要 cookie 或 csrf-token 才可正常访问，用于实现一些扩展功能的 api")]),t._v(" "),n("hr"),t._v(" "),n("p",[n("strong",[t._v("使用oicq客户端登录后获取cookie和csrf-token:")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" domain "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//支持qun.qq.com等多个domain")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" cookie "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" client"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCookies")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("domain"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookies"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" token "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" client"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCsrfToken")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("token"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// cookie需要设置在http请求头部")]),t._v("\n")])])]),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"center"}},[t._v("Name")]),t._v(" "),n("th",{staticStyle:{"text-align":"center"}},[t._v("Method")]),t._v(" "),n("th",[t._v("Url")]),t._v(" "),n("th",[t._v("Cookie")]),t._v(" "),n("th",[t._v("Domain")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("取QQ等级")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("GET")]),t._v(" "),n("td",[n("code",[t._v('https://club.vip.qq.com/api/vip/getQQLevelInfo?requestBody={"iUin":${QQ号}}')])]),t._v(" "),n("td",[t._v("YES")]),t._v(" "),n("td",[n("code",[t._v("vip.qq.com")])])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("取群资料")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("GET")]),t._v(" "),n("td",[n("code",[t._v("https://qinfo.clt.qq.com/cgi-bin/qun_info/get_group_info_all?gc=${群号}&bkn=${token}")]),n("br"),n("em",[t._v("※陌生群也可以获取")])]),t._v(" "),n("td",[t._v("YES")]),t._v(" "),n("td",[t._v("空")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("取群设置")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("GET")]),t._v(" "),n("td",[n("code",[t._v("https://qinfo.clt.qq.com/cgi-bin/qun_info/get_group_setting_v2?gc=${群号}&bkn=${token}")]),n("br"),n("em",[t._v("※必须是群员")])]),t._v(" "),n("td",[t._v("YES")]),t._v(" "),n("td",[t._v("空")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("取群操作记录")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("GET")]),t._v(" "),n("td",[n("code",[t._v("https://qinfo.clt.qq.com/cgi-bin/qun_info/get_sys_msg?gc=${群号}&bkn=${token}")]),n("br"),n("em",[t._v("※必须是管理员")])]),t._v(" "),n("td",[t._v("YES")]),t._v(" "),n("td",[t._v("空")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("取QQ资料")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("GET")]),t._v(" "),n("td",[n("code",[t._v("https://cgi.find.qq.com/qqfind/buddy/search_v3?keyword=${QQ号}")])]),t._v(" "),n("td",[t._v("YES")]),t._v(" "),n("td",[t._v("空")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("开关匿名")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("GET")]),t._v(" "),n("td",[n("code",[t._v("https://qqweb.qq.com/c/anonymoustalk/set_anony_switch?bkn=${token}&value=${1或0}&group_code=${群号}")])]),t._v(" "),n("td",[t._v("YES")]),t._v(" "),n("td",[n("code",[t._v("qqweb.qq.com")])])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("取群荣誉")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("GET")]),t._v(" "),n("td",[n("code",[t._v("https://qun.qq.com/interactive/qunhonor?gc=${群号}")])]),t._v(" "),n("td",[t._v("YES")]),t._v(" "),n("td",[n("code",[t._v("qun.qq.com")])])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("精华消息")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("GET")]),t._v(" "),n("td",[n("code",[t._v("https://qun.qq.com/essence/index?gc=${群号}")])]),t._v(" "),n("td",[t._v("YES")]),t._v(" "),n("td",[n("code",[t._v("qun.qq.com")])])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("取群公告")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("GET")]),t._v(" "),n("td",[n("code",[t._v("https://web.qun.qq.com/cgi-bin/announce/get_t_list?bkn=${token}&qid=${群号}&ft=23&s=-1&n=20")])]),t._v(" "),n("td",[t._v("YES")]),t._v(" "),n("td",[n("code",[t._v("qun.qq.com")])])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("发群公告")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("POST")]),t._v(" "),n("td",[n("code",[t._v("https://web.qun.qq.com/cgi-bin/announce/add_qun_notice?bkn=${token}")]),n("br"),t._v("POST数据："),n("code",[t._v('qid=${群号}&bkn=${token}&text=${内容}&pinned=0&type=1&settings={"is_show_edit_card":1,"tip_window_type":1,"confirm_required":1}')])]),t._v(" "),n("td",[t._v("YES")]),t._v(" "),n("td",[n("code",[t._v("qun.qq.com")])])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("取群成员")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("GET")]),t._v(" "),n("td",[n("code",[t._v("https://qun.qq.com/cgi-bin/qun_mgr/search_group_members?gc=${群号}&st=${0}%end=${20}&sort=0&bkn=${token}")])]),t._v(" "),n("td",[t._v("YES")]),t._v(" "),n("td",[n("code",[t._v("qun.qq.com")])])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("取群头像")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("GET")]),t._v(" "),n("td",[n("code",[t._v("https://p.qlogo.cn/gh/${群号}/${群号}/${0(size)}")])]),t._v(" "),n("td",[t._v("NO")]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("取群历史头像")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("GET")]),t._v(" "),n("td",[n("code",[t._v("https://p.qlogo.cn/gh/${群号}/${群号}_${1}/${0(size)}")])]),t._v(" "),n("td",[t._v("NO")]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("取QQ头像")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("GET")]),t._v(" "),n("td",[n("code",[t._v("https://q1.qlogo.cn/g?b=qq&s=${0(size)}&nk=${QQ号}")])]),t._v(" "),n("td",[t._v("NO")]),t._v(" "),n("td")]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("换群头像")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("POST")]),t._v(" "),n("td",[n("code",[t._v("http://htdata3.qq.com/cgi-bin/httpconn?htcmd=0x6ff0072&ver=5520&ukey=${client.sig.skey}&range=0&uin=${client.uin}&seq=1&groupuin=${群号}&filetype=3&imagetype=5&userdata=0&subcmd=1&subver=101&clip=0_0_0_0&filesize=${字节数}")]),n("br"),t._v("POST数据：图片字节集")]),t._v(" "),n("td",[t._v("NO")]),t._v(" "),n("td")])])])])}),[],!1,null,null,null);e.default=a.exports}}]);